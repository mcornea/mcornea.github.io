<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Hot Standby Routing Protocol ( HSRP ) Introduction</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">        
        <meta name="description" content="remote-lab.net learn by doing Linux and networking tutorials https://remote-lab.net
">
        <link rel="canonical" 
        href="https://remote-lab.net//hot-standby-routing-protocol-hsrp-introduction">
        
        <!-- Harmony styles -->
        <link rel="stylesheet" type="text/css" href="https://remote-lab.net/assets/css/main.css">

        <!-- Modernizr js -->
        <script async src="https://remote-lab.net/assets/js/modernizr.js"></script>    

        <!-- IE Fixes -->
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->        
    </head>
    <body class="theme-base-01">
        <header class="main-header">
            <div class="wc-container">
                <h1><a href="https://remote-lab.net/">remote-lab.net</a></h1>
                <h2>learn by doing</h2>
                <ul>
	<li>
		<a href="https://remote-lab.net">Home</a><span>/</span>
	</li>
	<li>
		<a href="https://remote-lab.net//about">About</a><span>/</span>
	</li>
	<li>
		<a href="https://remote-lab.net//blog">Blog</a><span>/</span>
	</li>
	<li>
		<a href="https://compute.remote-lab.net" target="_blank">Compute</a><span>/</span>
	</li>
	<li>
		<a href="https://remote-lab.net//docs">Docs</a><span>/</span>
	</li>
</ul>
                
            </div>
        </header>
        <div class="page-content wc-container">
	
	<div class="post">
		<h1>Hot Standby Routing Protocol ( HSRP ) Introduction</h1>
		<p class="post-meta">
			
      <span class="categories">
      switching and routing
      </span> |
	    
	    <span class="post-date">
    	Feb 19, 2012 
	    </span>
		</p>		
		<div class="post">
			<p>In the following article I’ll make a brief introduction over HSRP and a simple lab topology to show its basic utility. HSRP is Cisco’s proprietary protcol which provides non-disruptive IP traffic failover when you’ve got multiple redundant gateways for you LAN segment. </p>

<hr />

<p>Let’s get back to the basics and remember how 2 hosts communicate on a local subnet: one host broadcasts an ARP request on the local segment, receives the reply, updates its mac address table and then sends frames directly to the learned mac address. When 2 hosts are located on different subnets a router - the default gatway is needed to route packets between the subnets. In this case the hosts operating system checks the destination IP address, sees that it’s not part of the local subnet and tries sending the frame to the default gateway. In order to do that the host first sends an ARP request asking for the mac-address associated to IP address of the default gateway and after it receives it caches the mac address and sends all the frames through the default gateway.</p>

<p>Now HSRP comes in place where you have multiple default gateways but still on the hosts you can configure a single default gateway. What HSRP does is that it logically groups the multiple gateways providing a virtual IP and mac address for this group. The group can be formed out of a minimum of 2 devices - one of them will be the active gateway and the other one will be in standby mode . The election is based on a priority value ( 0 - 255 ) and the router with a higher priority is elected as the active one. The default priority is 100 and if both the devices have the same priority the one with a higher IP address becomes the active router. The routers exchange hello messages at regular time intervals so that they can be aware of each others state.</p>

<p>Let’s have a look at a simple HSRP topology and see how we can configure basic functionality of the protocol. As you may see we’ve got 2 LAN segments connected through 2 L3 switches. The HSRP group is configured per interface and as you can see we’ve got HSRP group 0 for both of our LAN segments. This perfectly valid because the HSRP groups are locally significant only on an interface. The virtual IP address is set per interface and it needs to be the same for all the routers in the group and the virtual mac address is formed by 0000.0c07.acxx where xx is the HSRP group number as 2 hex digits.</p>

<p>In our scenario we will not configure any priority so the elected active router will be the one with the interface which has the higher IP address: GW_2 in our case.</p>

<p>That should be all you have to configure for basic HSRP. More detailed examples to follow where we shall tune the hello timers, configure authentication methods between the group members and try to load balance the traffic with the help of HSRP.</p>

<p><img class="aligncenter size-large wp-image-123" title="HSRP" src="https://remote-lab.net/assets/static/BlankNetworkDiagram-777x1024.png" alt="" width="550" height="724" /></p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">GW_2#show standby
FastEthernet0/1 - Group 0
  State is Active
    <span class="m">2</span> state changes, last state change 00:15:09
  Virtual IP address is 192.168.10.1
  Active virtual MAC address is 0000.0c07.ac00
    Local virtual MAC address is 0000.0c07.ac00 <span class="o">(</span>v1 default<span class="o">)</span>
  Hello <span class="nb">time </span><span class="m">3</span> sec, hold <span class="nb">time </span><span class="m">10</span> sec
    Next hello sent in 1.664 secs
  Preemption disabled
  Active router is <span class="nb">local</span>
<span class="nb">  </span>Standby router is 192.168.10.2, priority <span class="m">100</span> <span class="o">(</span>expires in 10.032 sec<span class="o">)</span>
  Priority <span class="m">100</span> <span class="o">(</span>default 100<span class="o">)</span>
  Group name is <span class="s2">&quot;hsrp-Fa0/1-0&quot;</span> <span class="o">(</span>default<span class="o">)</span>
FastEthernet0/2 - Group 0
  State is Active
    <span class="m">2</span> state changes, last state change 00:15:09
  Virtual IP address is 192.168.20.1
  Active virtual MAC address is 0000.0c07.ac00
    Local virtual MAC address is 0000.0c07.ac00 <span class="o">(</span>v1 default<span class="o">)</span>
  Hello <span class="nb">time </span><span class="m">3</span> sec, hold <span class="nb">time </span><span class="m">10</span> sec
    Next hello sent in 2.144 secs
  Preemption disabled
  Active router is <span class="nb">local</span>
<span class="nb">  </span>Standby router is 192.168.20.2, priority <span class="m">100</span> <span class="o">(</span>expires in 9.120 sec<span class="o">)</span>
  Priority <span class="m">100</span> <span class="o">(</span>default 100<span class="o">)</span>
  Group name is <span class="s2">&quot;hsrp-Fa0/2-0&quot;</span> <span class="o">(</span>default<span class="o">)</span>
GW_2#show run int fa0/1
Building configuration...
Current configuration : <span class="m">114</span> bytes
!
interface FastEthernet0/1
 no switchport
 ip address 192.168.10.3 255.255.255.0
 standby <span class="m">0</span> ip 192.168.10.1
end
GW_2#show run int fa0/2
Building configuration...
Current configuration : <span class="m">114</span> bytes
!
interface FastEthernet0/2
 no switchport
 ip address 192.168.20.3 255.255.255.0
 standby <span class="m">0</span> ip 192.168.20.1
end</code></pre></div>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">GW_1#sh standby
FastEthernet0/1 - Group 0
  State is Standby
    <span class="m">4</span> state changes, last state change 00:15:52
  Virtual IP address is 192.168.10.1
  Active virtual MAC address is 0000.0c07.ac00
    Local virtual MAC address is 0000.0c07.ac00 <span class="o">(</span>v1 default<span class="o">)</span>
  Hello <span class="nb">time </span><span class="m">3</span> sec, hold <span class="nb">time </span><span class="m">10</span> sec
    Next hello sent in 0.480 secs
  Preemption disabled
  Active router is 192.168.10.3, priority <span class="m">100</span> <span class="o">(</span>expires in 10.976 sec<span class="o">)</span>
  Standby router is <span class="nb">local</span>
<span class="nb">  </span>Priority <span class="m">100</span> <span class="o">(</span>default 100<span class="o">)</span>
  Group name is <span class="s2">&quot;hsrp-Fa0/1-0&quot;</span> <span class="o">(</span>default<span class="o">)</span>
FastEthernet0/2 - Group 0
  State is Standby
    <span class="m">4</span> state changes, last state change 00:15:54
  Virtual IP address is 192.168.20.1
  Active virtual MAC address is 0000.0c07.ac00
    Local virtual MAC address is 0000.0c07.ac00 <span class="o">(</span>v1 default<span class="o">)</span>
  Hello <span class="nb">time </span><span class="m">3</span> sec, hold <span class="nb">time </span><span class="m">10</span> sec
    Next hello sent in 0.224 secs
  Preemption disabled
  Active router is 192.168.20.3, priority <span class="m">100</span> <span class="o">(</span>expires in 10.288 sec<span class="o">)</span>
  Standby router is <span class="nb">local</span>
<span class="nb">  </span>Priority <span class="m">100</span> <span class="o">(</span>default 100<span class="o">)</span>
  Group name is <span class="s2">&quot;hsrp-Fa0/2-0&quot;</span> <span class="o">(</span>default<span class="o">)</span>
GW_1#sh run int fa0/1
Building configuration...
Current configuration : <span class="m">114</span> bytes
!
interface FastEthernet0/1
 no switchport
 ip address 192.168.10.2 255.255.255.0
 standby <span class="m">0</span> ip 192.168.10.1
end
GW_1#sh run int fa0/2
Building configuration...
Current configuration : <span class="m">114</span> bytes
!
interface FastEthernet0/2
 no switchport
 ip address 192.168.20.2 255.255.255.0
 standby <span class="m">0</span> ip 192.168.20.1
end</code></pre></div>


		</div>
	</div>


	
	<div class="related">
		<h4>Related Posts</h2>
		<ul class="posts">
		    
		    <li>
			  <span>05 Apr 2015 &raquo;</span>
			  <a href="https://remote-lab.net//getting-started-with-docker">Getting started with Docker and the wonders of Open Source</a>
		    </li>
		    
		    <li>
			  <span>24 Feb 2015 &raquo;</span>
			  <a href="https://remote-lab.net//opsf-on-ios-with-ansible">OSPF lab provisioning on IOS with Ansible</a>
		    </li>
		    
		    <li>
			  <span>12 Oct 2014 &raquo;</span>
			  <a href="https://remote-lab.net//sdn-intro-basic-with-ovs-and-pox">SDN Intro: Basic L2 connectivity by using OVS and POX</a>
		    </li>
		    
		</ul>
	</div>
	

	<div class="post-footer">
		<div class="column-1">
			
				<a href="https://remote-lab.net//lantronix-ets8p-terminal-server"><< Older</a>
			
		</div>
		<div class="column-2"><a href="https://remote-lab.net// ">Home</a></div>
		<div class="column-3">
			
				<a href="https://remote-lab.net//hsrp-timers-tuning-and-authentication">Newer >></a>
			
		</div>
	</div>
</div>
 

        <footer class="main-footer">
            <div class="wc-container">
                <div class="column one">
                    <h6>Few more links</h6>
<ul class="menu">
    <li><a href="https://remote-lab.net//about">About</a></li>
    <li><a href="https://remote-lab.net//blogroll">Blogroll</a></li>
</ul>		
                    
                </div>
                <div class="column two">
                    <h6>Follow me</h6>

<ul class="social-media">


    
    <li>
        <a title="remoteur on Twitter" 
            href="https://twitter.com/remoteur" 
            class="twitter wc-img-replace" target="_blank">Twitter</a>
    </li>   
    

    
    <li>
        <a title="remoteur on Github" 
            href="https://github.com/remoteur" 
            class="github wc-img-replace" target="_blank">Github</a>
    </li>
     

    
    <li>
        <a title="marius.catalin.31542 on Facebook" 
            href="https://facebook.com/marius.catalin.31542" 
            class="facebook wc-img-replace" target="_blank">Facebook</a>
    </li>
    

    

    

    

</ul>
                </div>
            </div>
            <p class="wc-container disclaimer">
                
Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>
            </p>
        </footer>
        <script type="text/javascript">
          /* To avoid render blocking css */
          var cb = function() {
            var l = document.createElement('link'); l.rel = 'stylesheet';
            l.href = 'https://fonts.googleapis.com/css?family=Ubuntu+Mono&subset=latin';
            var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h);
          };
          var raf = requestAnimationFrame || mozRequestAnimationFrame ||
              webkitRequestAnimationFrame || msRequestAnimationFrame;
          if (raf) raf(cb);
          else window.addEventListener('load', cb);
        </script>
        <!-- jQuery -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- When no internet load JQuery from local -->
        <script>window.jQuery || document.write('<script src="https://remote-lab.net//assets/js/jquery.min.js"><\/script>')</script>
        <!-- Site js -->
        <script src="https://remote-lab.net/assets/js/all.js"></script>
        <!-- Google analytics  -->
        
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxx-x']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

    </body>        
</html>
