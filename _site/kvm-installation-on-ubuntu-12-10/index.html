<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>KVM Installation on Ubuntu 12.10</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">        
        <meta name="description" content="Harmony is a free responsive jekyll theme by Gayan Virajith and Maheshika Lakmali. Sourced on Github -  https://github.com/gayanvirajith/harmony
">
        <link rel="canonical" 
        href="https://remote-lab.net//kvm-installation-on-ubuntu-12-10">
        
        <!-- Harmony styles -->
        <link rel="stylesheet" type="text/css" href="https://remote-lab.net/assets/css/main.css">

        <!-- Modernizr js -->
        <script async src="https://remote-lab.net/assets/js/modernizr.js"></script>    

        <!-- IE Fixes -->
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->        
    </head>
    <body class="theme-base-01">
        <header class="main-header">
            <div class="wc-container">
                <h1><a href="https://remote-lab.net/">remote-lab.net</a></h1>
                <h2>learn by doing</h2>
                <ul>
	<li>
		<a href="https://remote-lab.net">Home</a><span>/</span>
	</li>
	<li>
		<a href="https://remote-lab.net//about">About</a><span>/</span>
	</li>
	<li>
		<a href="https://remote-lab.net//blog">Blog</a><span>/</span>
	</li>
	<li>
		<a href="https://compute.remote-lab.net" target="_blank">Compute</a><span>/</span>
	</li>
</ul>
                
            </div>
        </header>
        <div class="page-content wc-container">
	
	<div class="post">
		<h1>KVM Installation on Ubuntu 12.10</h1>
		<p class="post-meta">
			
      <span class="categories">
      linux and virtualization
      </span> |
	    
	    <span class="post-date">
    	Apr 19, 2013 
	    </span>
		</p>		
		<div class="post">
			<p>In this post I’d like to do an introduction on how you can install KVM and the tools that allow you to easily run VMs.
KVM - Kernel Virtual Machine is a Linux kernel module that enables the user space programs to use the hardware virtualization capabilities of Intel or AMD processors.</p>

<hr />

<p>QEMU is a machine emulator that allows you to run instructions for specific architecture on your x86 CPU. It is also a virtualizer that executes the guest VM code directly on the hypervisor CPU, which is our use case providing almost native performance for the guest VMs.</p>

<p>The libvirt library provides an interface used for the KVM instances management.</p>

<p>bridge-utils allow you to bridge multiple ethernet devices and it will help you provide connectivity to your VM instances.</p>

<p>virtinst provides cli tools that allow you to create VMs</p>

<p>virt-manager is a graphical tool used for the VM management</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">marius@remoteur:~<span class="se">\&gt;</span> sudo aptitude install qemu-kvm libvirt-bin bridge-utils virtinst virt-manager</code></pre></div>

<p>The next step is to add our username to the libvirtd group:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">marius@remoteur:~<span class="se">\&gt;</span> sudo adduser <span class="sb">`</span>id -un<span class="sb">`</span> libvirtd</code></pre></div>

<p>At this time we should be able to start creating an instance. Let’s prepare the storage and the network our VM will use.
For the storage we will create an emtpy image file of 5GiB size:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">marius@remoteur:~<span class="se">\&gt;</span> dd <span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>vm.storage <span class="nv">bs</span><span class="o">=</span><span class="m">1024</span> <span class="nv">count</span><span class="o">=</span><span class="m">0</span> <span class="nv">seek</span><span class="o">=</span><span class="nv">$[</span>1024*1024*5<span class="o">]</span></code></pre></div>

<p>We will create a bridge called br0 and add eth0 wich is my laptop wired network interface to it. When created the VM should have an interface called vnet0 that is part of this bridge group:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">marius@remoteur:~<span class="se">\&gt;</span> sudo brctl add br0
marius@remoteur:~<span class="se">\&gt;</span> sudo brctl addif br0 eth0
marius@remoteur:~<span class="se">\&gt;</span> brctl show
bridge name      bridge id        STP enabled      interfaces
br0           8000.c82a141ab88e        no          eth0</code></pre></div>

<p>Now let’s define our VM instance.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">marius@remoteur:~<span class="se">\&gt;</span> sudo virt-install --name vm --disk <span class="nv">path</span><span class="o">=</span>/home/marius/vm.storage,bus<span class="o">=</span>virtio,cache<span class="o">=</span>none --network <span class="nv">bridge</span><span class="o">=</span>br0,model<span class="o">=</span>virtio --location<span class="o">=</span>ftp://ftp.lug.ro/debian/dists/wheezy/main/installer-amd64/ --cpuset<span class="o">=</span>auto --vcpu<span class="o">=</span><span class="m">1</span> --ram<span class="o">=</span><span class="m">1024</span> --extra-args<span class="o">=</span><span class="s2">&quot;priority=low&quot;</span></code></pre></div>

<p>After this our install should be starting. You can use virt-manager to manage all the machines that are running on your local or remote hypervisor. It also allows you to access their consoles and adjust different parameters in the VM definition.
<a href="https://remote-lab.net/assets/static/virt-manager.png"><img class="aligncenter size-medium wp-image-147" title="virt-manager" alt="" src="https://remote-lab.net/assets/static/virt-manager.png" width="500" height="465" /></a></p>

		</div>
	</div>


	
	<div class="related">
		<h4>Related Posts</h2>
		<ul class="posts">
		    
		    <li>
			  <span>05 Apr 2015 &raquo;</span>
			  <a href="https://remote-lab.net//getting-started-with-docker">Getting started with Docker and the wonders of Open Source</a>
		    </li>
		    
		    <li>
			  <span>24 Feb 2015 &raquo;</span>
			  <a href="https://remote-lab.net//opsf-on-ios-with-ansible">OSPF lab provisioning on IOS with Ansible</a>
		    </li>
		    
		    <li>
			  <span>12 Oct 2014 &raquo;</span>
			  <a href="https://remote-lab.net//sdn-intro-basic-with-ovs-and-pox">SDN Intro: Basic L2 connectivity by using OVS and POX</a>
		    </li>
		    
		</ul>
	</div>
	

	<div class="post-footer">
		<div class="column-1">
			
				<a href="https://remote-lab.net//routing/ios/2013/04/14/cisco-sdm/"><< Older</a>
			
		</div>
		<div class="column-2"><a href="https://remote-lab.net// ">Home</a></div>
		<div class="column-3">
			
				<a href="https://remote-lab.net//dynamic-dns-using-your-own-domain">Newer >></a>
			
		</div>
	</div>
</div>
 

        <footer class="main-footer">
            <div class="wc-container">
                <div class="column one">
                    <h6>Few more links</h6>
<ul class="menu">
    <li><a href="https://remote-lab.net//about">About</a></li>
    <li><a href="https://remote-lab.net//blogroll">Blogroll</a></li>
</ul>		
                    
                </div>
                <div class="column two">
                    <h6>Follow me</h6>

<ul class="social-media">


    
    <li>
        <a title="remoteur on Twitter" 
            href="https://twitter.com/remoteur" 
            class="twitter wc-img-replace" target="_blank">Twitter</a>
    </li>   
    

    
    <li>
        <a title="remoteur on Github" 
            href="https://github.com/remoteur" 
            class="github wc-img-replace" target="_blank">Github</a>
    </li>
     

    
    <li>
        <a title="marius.catalin.31542 on Facebook" 
            href="https://facebook.com/marius.catalin.31542" 
            class="facebook wc-img-replace" target="_blank">Facebook</a>
    </li>
    

    

    

    

</ul>
                </div>
            </div>
            <p class="wc-container disclaimer">
                
Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>
            </p>
        </footer>
        <script type="text/javascript">
          /* To avoid render blocking css */
          var cb = function() {
            var l = document.createElement('link'); l.rel = 'stylesheet';
            l.href = 'http://fonts.googleapis.com/css?family=Ubuntu+Mono&subset=latin';
            var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h);
          };
          var raf = requestAnimationFrame || mozRequestAnimationFrame ||
              webkitRequestAnimationFrame || msRequestAnimationFrame;
          if (raf) raf(cb);
          else window.addEventListener('load', cb);
        </script>
        <!-- jQuery -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- When no internet load JQuery from local -->
        <script>window.jQuery || document.write('<script src="https://remote-lab.net//assets/js/jquery.min.js"><\/script>')</script>
        <!-- Site js -->
        <script src="https://remote-lab.net/assets/js/all.js"></script>
        <!-- Google analytics  -->
        
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxx-x']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

    </body>        
</html>
