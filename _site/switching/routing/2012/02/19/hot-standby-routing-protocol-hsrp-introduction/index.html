<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Hot Standby Routing Protocol ( HSRP ) Introduction</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">        
        <meta name="description" content="Harmony is a free responsive jekyll theme by Gayan Virajith and Maheshika Lakmali. Sourced on Github -  https://github.com/gayanvirajith/harmony
">
        <link rel="canonical" 
        href="http://remoteur.github.io//switching/routing/2012/02/19/hot-standby-routing-protocol-hsrp-introduction/">
        
        <!-- Harmony styles -->
        <link rel="stylesheet" type="text/css" href="http://remoteur.github.io/assets/css/main.css">

        <!-- Modernizr js -->
        <script async src="http://remoteur.github.io/assets/js/modernizr.js"></script>    

        <!-- IE Fixes -->
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->        
    </head>
    <body class="theme-base-01">
        <header class="main-header">
            <div class="wc-container">
                <h1><a href="http://remoteur.github.io/">remote-lab.net</a></h1>
                <h2>learn by doing</h2>
                <ul>
	<li>
		<a href="http://remoteur.github.io">Home</a><span>/</span>
	</li>
	<li>
		<a href="http://remoteur.github.io//about">About</a><span>/</span>
	</li>
	<li>
		<a href="http://remoteur.github.io//blog">Blog</a><span>/</span>
	</li>
	<li>
		<a href="https://compute.remote-lab.net" target="_blank">Compute</a><span>/</span>
	</li>
</ul>
                
            </div>
        </header>
        <div class="page-content wc-container">
	
	<div class="post">
		<h1>Hot Standby Routing Protocol ( HSRP ) Introduction</h1>
		<p class="post-meta">
			
      <span class="categories">
      switching and routing
      </span> |
	    
	    <span class="post-date">
    	Feb 19, 2012 
	    </span>
		</p>		
		<div class="post">
			<p>In the following article I'll make a brief introduction over HSRP and a simple lab topology to show its basic utility.</p>
<p>HSRP is Cisco's proprietary protcol which provides non-disruptive IP traffic failover when you've got multiple redundant gateways for you LAN segment. Let's get back to the basics and remember how 2 hosts communicate on a local subnet: one host broadcasts an ARP request on the local segment, receives the reply, updates its mac address table and then sends frames directly to the learned mac address. When 2 hosts are located on different subnets a router - the default gatway is needed to route packets between the subnets. In this case the hosts operating system checks the destination IP address, sees that it's not part of the local subnet and tries sending the frame to the default gateway. In order to do that the host first sends an ARP request asking for the mac-address associated to IP address of the default gateway and after it receives it caches the mac address and sends all the frames through the default gateway.</p>
<p>Now HSRP comes in place where you have multiple default gateways but still on the hosts you can configure a single default gateway. What HSRP does is that it logically groups the multiple gateways providing a virtual IP and mac address for this group. The group can be formed out of a minimum of 2 devices - one of them will be the active gateway and the other one will be in standby mode . The election is based on a priority value ( 0 - 255 ) and the router with a higher priority is elected as the active one. The default priority is 100 and if both the devices have the same priority the one with a higher IP address becomes the active router.&nbsp;The routers exchange hello messages at regular time intervals so that they can be aware of each others state.</p>
<p>Now let's have a look at a simple HSRP topology and see how we can configure basic functionality of the protocol.</p>
<p>As you may see we've got 2 LAN segments connected through 2 L3 switches. The HSRP group is configured per interface and as you can see we've got HSRP group 0 for both of our LAN segments. This perfectly valid because the HSRP groups are locally significant only on an interface. The virtual IP address is set per interface and it needs to be the same for all the routers in the group and the virtual mac address is formed by 0000.0c07.acxx where xx is the HSRP group number as 2 hex digits.<br />
In our scenario we will not configure any priority so the elected active router will be the one with the interface which has the higher IP address: GW_2 in our case.</p>
<p>That should be all you have to configure for basic HSRP. More detailed examples to follow where we shall tune the hello timers, configure authentication methods between the group members and try to load balance the traffic with the help of HSRP.</p>
<p><img class="aligncenter size-large wp-image-123" title="HSRP" src="http://www.remote-lab.net/wp-content/uploads/2012/02/BlankNetworkDiagram-777x1024.png" alt="" width="550" height="724" /></p>
<p><code lang="c[lines-notools]">GW_2#show standby<br />
FastEthernet0/1 - Group 0<br />
  State is Active<br />
    2 state changes, last state change 00:15:09<br />
  Virtual IP address is 192.168.10.1<br />
  Active virtual MAC address is 0000.0c07.ac00<br />
    Local virtual MAC address is 0000.0c07.ac00 (v1 default)<br />
  Hello time 3 sec, hold time 10 sec<br />
    Next hello sent in 1.664 secs<br />
  Preemption disabled<br />
  Active router is local<br />
  Standby router is 192.168.10.2, priority 100 (expires in 10.032 sec)<br />
  Priority 100 (default 100)<br />
  Group name is "hsrp-Fa0/1-0" (default)<br />
FastEthernet0/2 - Group 0<br />
  State is Active<br />
    2 state changes, last state change 00:15:09<br />
  Virtual IP address is 192.168.20.1<br />
  Active virtual MAC address is 0000.0c07.ac00<br />
    Local virtual MAC address is 0000.0c07.ac00 (v1 default)<br />
  Hello time 3 sec, hold time 10 sec<br />
    Next hello sent in 2.144 secs<br />
  Preemption disabled<br />
  Active router is local<br />
  Standby router is 192.168.20.2, priority 100 (expires in 9.120 sec)<br />
  Priority 100 (default 100)<br />
  Group name is "hsrp-Fa0/2-0" (default)<br />
GW_2#show run int fa0/1<br />
Building configuration...
<p>Current configuration : 114 bytes<br />
!<br />
interface FastEthernet0/1<br />
 no switchport<br />
 ip address 192.168.10.3 255.255.255.0<br />
 standby 0 ip 192.168.10.1<br />
end</p>
<p>GW_2#show run int fa0/2<br />
Building configuration...</p>
<p>Current configuration : 114 bytes<br />
!<br />
interface FastEthernet0/2<br />
 no switchport<br />
 ip address 192.168.20.3 255.255.255.0<br />
 standby 0 ip 192.168.20.1<br />
end<br />
</p>
<p><code lang="c[lines-notools]">GW_1#sh standby<br />
FastEthernet0/1 - Group 0<br />
  State is Standby<br />
    4 state changes, last state change 00:15:52<br />
  Virtual IP address is 192.168.10.1<br />
  Active virtual MAC address is 0000.0c07.ac00<br />
    Local virtual MAC address is 0000.0c07.ac00 (v1 default)<br />
  Hello time 3 sec, hold time 10 sec<br />
    Next hello sent in 0.480 secs<br />
  Preemption disabled<br />
  Active router is 192.168.10.3, priority 100 (expires in 10.976 sec)<br />
  Standby router is local<br />
  Priority 100 (default 100)<br />
  Group name is "hsrp-Fa0/1-0" (default)<br />
FastEthernet0/2 - Group 0<br />
  State is Standby<br />
    4 state changes, last state change 00:15:54<br />
  Virtual IP address is 192.168.20.1<br />
  Active virtual MAC address is 0000.0c07.ac00<br />
    Local virtual MAC address is 0000.0c07.ac00 (v1 default)<br />
  Hello time 3 sec, hold time 10 sec<br />
    Next hello sent in 0.224 secs<br />
  Preemption disabled<br />
  Active router is 192.168.20.3, priority 100 (expires in 10.288 sec)<br />
  Standby router is local<br />
  Priority 100 (default 100)<br />
  Group name is "hsrp-Fa0/2-0" (default)<br />
GW_1#sh run int fa0/1<br />
Building configuration...
<p>Current configuration : 114 bytes<br />
!<br />
interface FastEthernet0/1<br />
 no switchport<br />
 ip address 192.168.10.2 255.255.255.0<br />
 standby 0 ip 192.168.10.1<br />
end</p>
<p>GW_1#sh run int fa0/2<br />
Building configuration...</p>
<p>Current configuration : 114 bytes<br />
!<br />
interface FastEthernet0/2<br />
 no switchport<br />
 ip address 192.168.20.2 255.255.255.0<br />
 standby 0 ip 192.168.20.1<br />
end<br />
</p>
</code></p></code></p>

		</div>
	</div>


	
	<div class="related">
		<h4>Related Posts</h2>
		<ul class="posts">
		    
		    <li>
			  <span>05 Apr 2015 &raquo;</span>
			  <a href="http://remoteur.github.io//getting-started-with-docker">Getting started with Docker and the wonders of Open Source</a>
		    </li>
		    
		    <li>
			  <span>24 Feb 2015 &raquo;</span>
			  <a href="http://remoteur.github.io//opsf-on-ios-with-ansible">OSPF lab provisioning on IOS with Ansible</a>
		    </li>
		    
		    <li>
			  <span>12 Oct 2014 &raquo;</span>
			  <a href="http://remoteur.github.io//linux/switching/routing/virtualization/ios/python/2014/10/12/sdn-intro-basic-l2-connectivity-by-using-ovs-and-pox/">SDN Intro: Basic L2 connectivity by using OVS and POX</a>
		    </li>
		    
		</ul>
	</div>
	

	<div class="post-footer">
		<div class="column-1">
			
				<a href="http://remoteur.github.io//uncategorized/2012/02/05/lantronix-ets8p-terminal-server/"><< Older</a>
			
		</div>
		<div class="column-2"><a href="http://remoteur.github.io// ">Home</a></div>
		<div class="column-3">
			
				<a href="http://remoteur.github.io//switching/routing/2012/02/22/hsrp-timers-tuning-and-authentication/">Newer >></a>
			
		</div>
	</div>
</div>
 

        <footer class="main-footer">
            <div class="wc-container">
                <div class="column one">
                    <h6>Few more links</h6>
<ul class="menu">
    <li><a href="http://remoteur.github.io//about">About</a></li>
    <li><a href="http://remoteur.github.io//blogroll">Blogroll</a></li>
</ul>		
                    
                </div>
                <div class="column two">
                    <h6>Follow me</h6>

<ul class="social-media">


    
    <li>
        <a title="remoteur on Twitter" 
            href="https://twitter.com/remoteur" 
            class="twitter wc-img-replace" target="_blank">Twitter</a>
    </li>   
    

    
    <li>
        <a title="remoteur on Github" 
            href="https://github.com/remoteur" 
            class="github wc-img-replace" target="_blank">Github</a>
    </li>
     

    
    <li>
        <a title="marius.catalin.31542 on Facebook" 
            href="https://facebook.com/marius.catalin.31542" 
            class="facebook wc-img-replace" target="_blank">Facebook</a>
    </li>
    

    

    

    

</ul>
                </div>
            </div>
            <p class="wc-container disclaimer">
                
Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>
            </p>
        </footer>
        <script type="text/javascript">
          /* To avoid render blocking css */
          var cb = function() {
            var l = document.createElement('link'); l.rel = 'stylesheet';
            l.href = 'http://fonts.googleapis.com/css?family=Ubuntu+Mono&subset=latin';
            var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h);
          };
          var raf = requestAnimationFrame || mozRequestAnimationFrame ||
              webkitRequestAnimationFrame || msRequestAnimationFrame;
          if (raf) raf(cb);
          else window.addEventListener('load', cb);
        </script>
        <!-- jQuery -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- When no internet load JQuery from local -->
        <script>window.jQuery || document.write('<script src="http://remoteur.github.io//assets/js/jquery.min.js"><\/script>')</script>
        <!-- Site js -->
        <script src="http://remoteur.github.io/assets/js/all.js"></script>
        <!-- Google analytics  -->
        
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxx-x']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

    </body>        
</html>
